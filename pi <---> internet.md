# overview
i wanna let the internet talk to servers on my raspberry pi. How do i go about doing this?

according to some resources, here are the general steps:
1. assign a static ip address to the pi on the local network
2. update the configuration of your router to port forward inbound traffic to your pi
3. setup ddns


# assign static ip address to your pi
the raspberry pi defaults to using a dynamic IP address assigned by the DHCP server (most likely your network router). we want to set it to be static instead.
### network information
we need to learn a bit about our network before we do anything.

1. get the **default gateway ip**. this is the local ip address of our router. all connected devices talk to this in order to access the internet or other devices connected on the local network.
   ```shell
   $ netstat -nr
   Kernel IP routing table
   Destination     Gateway         Genmask         Flags   MSS Window  irtt Iface
   0.0.0.0         192.168.66.1    0.0.0.0         UG        0 0          0 wlan0
   192.168.66.0    0.0.0.0         255.255.255.0   U         0 0          0 wlan0
   ```
   we can see that `192.168.66.1` is our *gateway ip*.
2. get the **DNS server ip**. this is most likely the same as the gateway ip since your router might be acting as your DNS server.
   ```shell
   $ cat /etc/resolv.conf
   # Generated by resolvconf
   nameserver 192.168.66.1
   ```
3. get our pi's **local ip** address and broadcast address
   ```shell
   $ ip -a addr show | grep global
   inet 192.168.66.145/24 brd 192.168.66.255 scope global wlan0
   ```
### update dhcpcd.conf
we need to now tell the dhcp server that we don't want a dynamic ip address, but we will be using a static one. we can do this by making some updates to the `/etc/dhcpcd.conf` file. this file is the configuration for the dhcp client daemon which runs on our pi and communicates with the dhcp server. Here are the changes we need to make to `/etc/dhcpcd.conf`:
```shell
interface wlan0
static ip_address=192.168.66.145/24
static routers=192.168.66.1
static domain_name_servers=192.168.66.1
```
in the changes above, we are using the info we gathered previously and mapped
* *ip_address* <--> *local ip*
* *routers* <--> *gateway ip*
* *domain_name_servers* <--> *DNS server ip*

### reboot your pi
# update router config to port forward inbound trafic to pi
now we need to configure our router to port forward a port on the router's public ip to a port on our pi's static local network ip. to do this we need to login to our router's admin portal. go to your web browser and go to your router ip. In the previous step we found that the router (gateway) ip is `192.168.66.1`, so lets go there in our browser. You should be presented with the login screen for your router. Usually the username and password are both `admin` so you should probably change this to something more secure.

this step will be highly depenedent on what router you have. generally, you want to find a way to configure port forwarding and then forward a port on the router's public ip to a port on your pi's static local ip address using all protocols.

# dynamic dns
just like how, by default, a device connecting onto the local network is dynamically assigned an ip address by your router, your *router* is dynamically re-assigned an ip address by your internet service provider (ISP) quite frequently. if we want to be able to connect to our router from the outside world (via a domain name we own or something) without having to always re-lookup our router's exposed ip address, then we are going to have to stay up-to-date with what our router's ip address everytime it changes. *Dynamic DNS* (DDNS) to the rescue!
